<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>DOMBET INFORMATICA</title>

<style>
html{zoom:.9}
body{margin:0;font-family:Arial,sans-serif;background:#fff}
header{background:#0a1a3a;padding:16px 22px;color:#fff;display:flex;align-items:center;gap:25px}

/* Modificaciones para el logo */
.logo-left{
  cursor:pointer;
  display: flex;
  flex-direction: column;
  /* El contenedor tomar치 el ancho del elemento m치s ancho (DOMBET) */
}
.brand{
  font-size:48px;
  font-weight:900;
  line-height: 1; /* Ajuste para reducir espacio vertical */
}
.sub{
  font-size:17px;
  display: flex;
  justify-content: space-between; /* Distribuye las letras uniformemente */
  width: 100%; /* Asegura que ocupe todo el ancho del contenedor */
}

.products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:22px;padding:22px}
.card{cursor:pointer;border:1px solid #eee;border-radius:12px;padding:12px;transition:.3s}
.card:hover{transform:scale(1.03)}
.card img{width:100%;height:180px;object-fit:contain}

.name{font-size:15px;color:#333;height:36px;overflow:hidden}
.price{color:#1b8f3a;font-size:20px;font-weight:bold}

.btn-hover-cart{
  background:#0a1a3a;color:#fff;border:none;
  padding:10px;border-radius:8px;
  width:100%;margin-top:10px;
  cursor:pointer
}

.detail{display:none;padding:30px}
.detail img{width:100%;max-height:400px;object-fit:contain}

.buy-now{
  background:#25D366;color:#fff;border:none;
  padding:15px;font-size:18px;border-radius:14px;
  width:100%;margin-top:15px;cursor:pointer
}

/* Estilos del buscador */
.search-container {
  flex: 1;
  max-width: 600px;
  margin: 0 auto; /* Centra en el espacio disponible */
  position: relative;
  display: flex;
  background: #fff;
  border-radius: 30px; /* Bordes redondeados elegantes */
  padding: 2px;
}
.search-input {
  width: 100%;
  padding: 12px 20px;
  border-radius: 30px;
  border: none;
  outline: none;
  font-size: 16px;
  background: transparent;
}
.search-btn {
  background: transparent;
  border: none;
  padding: 0 20px;
  cursor: pointer;
  color: #888; /* Lupa gris */
  font-size: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.search-results {
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  background: #fff;
  border-radius: 15px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  z-index: 100;
  max-height: 400px;
  overflow-y: auto;
  display: none;
  margin-top: 8px;
}
.search-item {
  display: flex;
  align-items: center;
  padding: 10px 15px;
  cursor: pointer;
  border-bottom: 1px solid #eee;
  color: #333;
  transition: .2s;
}
.search-item:hover {
  background: #f5f5f5;
}
.search-item img {
  width: 50px;
  height: 50px;
  object-fit: contain;
  margin-right: 15px;
}
.search-item:last-child {
  border-bottom: none;
}

/* Estilos de la vista de detalle moderna */
.detail-container {
  display: flex;
  gap: 40px;
  flex-wrap: wrap;
  max-width: 1200px;
  margin: 0 auto;
}
.detail-left {
  flex: 1;
  min-width: 300px;
  display: flex;
  justify-content: center;
  align-items: start;
}
.detail-right {
  flex: 1;
  min-width: 300px;
  display: flex;
  flex-direction: column;
  gap: 15px;
}
.detail-name {
  font-size: 28px;
  font-weight: 700;
  color: #333;
  line-height: 1.2;
}
.detail-price {
  font-size: 32px;
  color: #d32f2f; /* Rojo precio oferta */
  font-weight: bold;
}
.shipping-box {
  display: flex;
  align-items: center;
  gap: 10px;
  color: #666;
  font-size: 14px;
  background: #f9f9f9;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #eee;
}
.qty-selector {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 10px 0;
}
.qty-btn {
  width: 40px;
  height: 40px;
  border: 1px solid #ccc;
  background: #fff;
  font-size: 20px;
  cursor: pointer;
  border-radius: 4px;
}
.qty-input {
  width: 60px;
  height: 40px;
  text-align: center;
  font-size: 18px;
  border: 1px solid #ccc;
  border-radius: 4px;
}
.btn-add-cart-detail {
  background: #0a1a3a;
  color: #fff;
  border: none;
  padding: 15px;
  font-size: 16px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
  transition: .3s;
}
.btn-add-cart-detail:hover { background: #152c55; }
.btn-whatsapp-detail {
  background: #25D366;
  color: #fff;
  border: none;
  padding: 15px;
  font-size: 16px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
  transition: .3s;
}
.btn-whatsapp-detail:hover { background: #1da851; }
</style>
</head>

<body>

<header>
  <div class="logo-left" onclick="goHome()">
    <div class="brand">DOMBET</div>
    <!-- Se separan las letras para lograr la alineaci칩n perfecta con flexbox -->
    <div class="sub">
      <span>I</span><span>n</span><span>f</span><span>o</span><span>r</span><span>m</span><span>치</span><span>t</span><span>i</span><span>c</span><span>a</span>
    </div>
  </div>
  <div class="search-container" id="searchContainer">
    <input type="text" class="search-input" id="searchInput" placeholder="Buscar productos...">
    <button class="search-btn">游댌</button>
    <div class="search-results" id="searchResults"></div>
  </div>
</header>

<div class="products" id="list"></div>

<div class="detail" id="detail">
  <div class="detail-container">
    <!-- Columna Izquierda: Imagen -->
    <div class="detail-left">
      <img id="dImg" style="width:100%; max-width:500px; object-fit:contain;" onerror="this.src='https://via.placeholder.com/500?text=Sin+Imagen'">
    </div>
    
    <!-- Columna Derecha: Info -->
    <div class="detail-right">
      <div class="detail-name" id="dName"></div>
      <div class="detail-price" id="dPrice"></div>
      
      <div style="font-weight:bold; margin-top:10px;">Detalles:</div>
      <p id="dDesc" style="color:#555; line-height:1.5; margin:0;"></p>
      
      <div class="shipping-box">
        <!-- Icono de cami칩n gris (SVG) -->
        <svg width="24" height="24" viewBox="0 0 24 24" fill="#888"><path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
        <span>Hacemos env칤os a todo el Paraguay por transportadora</span>
      </div>

      <div class="qty-selector">
        <label style="font-weight:bold;">Cantidad:</label>
        <button class="qty-btn" onclick="updateQty(-1)">-</button>
        <input type="number" id="qtyInput" class="qty-input" value="1" readonly>
        <button class="qty-btn" onclick="updateQty(1)">+</button>
      </div>

      <button class="btn-add-cart-detail" onclick="addToCartDetail()">A침adir al carrito</button>
      <button class="btn-whatsapp-detail" onclick="buyWhatsApp()">Comprar por WhatsApp</button>
    </div>
  </div>
</div>

<script>
let products=[]
let current=null
let qty=1

fetch("https://dombet-backend.onrender.com/products")
.then(r=>r.json())
.then(d=>{
  products=d
  renderList()
})

function renderList(){
  list.innerHTML=""
  detail.style.display="none"
  list.style.display="grid"

  products.forEach((p,i)=>{
    list.innerHTML+=`
      <div class="card" onclick="openDetail(${i})">
        <img src="${p.image}" onerror="this.src='https://via.placeholder.com/300?text=Sin+Imagen'">
        <div class="name">${p.name}</div>
        <div class="price">Gs. ${Number(p.price).toLocaleString()}</div>
        <button class="btn-hover-cart"
          onclick="event.stopPropagation(); buyQuick(${i})">
          A침adir a carrito
        </button>
      </div>
    `
  })
}

function openDetail(i){
  current=products[i]
  qty=1 // Resetear cantidad
  list.style.display="none"
  detail.style.display="block"
  document.getElementById('qtyInput').value = qty

  dName.innerText=current.name
  dImg.src=current.image
  dDesc.innerText=current.description
  dPrice.innerText="Gs. "+Number(current.price).toLocaleString()
}

function goHome(){
  renderList()
}

function updateQty(n){
  qty += n
  if(qty < 1) qty = 1
  document.getElementById('qtyInput').value = qty
}

function addToCartDetail(){
  alert(`A침adido al carrito: ${current.name} (x${qty})`)
  // Aqu칤 ir칤a la l칩gica real del carrito si existiera
}

function buyQuick(i){
  const p=products[i]
  const msg=`Hola! Quiero comprar:\n${p.name}\nPrecio: Gs. ${p.price}`
  window.open("https://wa.me/595985697384?text="+encodeURIComponent(msg))
}

function buyWhatsApp(){
  const total = current.price * qty
  const msg=`Hola! Quiero comprar:\nProducto: ${current.name}\nCantidad: ${qty}\nPrecio Unitario: Gs. ${Number(current.price).toLocaleString()}\nTotal: Gs. ${Number(total).toLocaleString()}`
  window.open("https://wa.me/595985697384?text="+encodeURIComponent(msg))
}

// L칩gica del buscador
const searchInput = document.getElementById('searchInput')
const searchResults = document.getElementById('searchResults')
const searchContainer = document.getElementById('searchContainer')

searchInput.addEventListener('input', (e) => {
  const term = e.target.value.toLowerCase().trim()
  if (!term) {
    searchResults.style.display = 'none'
    return
  }
  
  const filtered = products.filter(p => p.name.toLowerCase().includes(term))
  
  if (filtered.length > 0) {
    searchResults.innerHTML = filtered.map(p => {
      const idx = products.indexOf(p)
      return `
        <div class="search-item" onclick="openDetail(${idx}); searchResults.style.display='none'; searchInput.value=''">
          <img src="${p.image}" onerror="this.src='https://via.placeholder.com/50?text=...'">
          <div>${p.name}</div>
        </div>
      `
    }).join('')
    searchResults.style.display = 'block'
  } else {
    searchResults.style.display = 'none'
  }
})

window.addEventListener('click', (e) => {
  if (!searchContainer.contains(e.target)) {
    searchResults.style.display = 'none'
  }
})
</script>

</body>
</html>
