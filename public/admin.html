<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Admin – DomBet</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f5f5;
  padding: 20px;
}
h1 { margin-bottom: 10px; }
form {
  background: white;
  padding: 20px;
  border-radius: 8px;
  max-width: 500px;
}
input, textarea {
  width: 100%;
  padding: 10px;
  margin-bottom: 10px;
}
button {
  padding: 12px;
  width: 100%;
  background: #0a1a3a;
  color: white;
  border: none;
  cursor: pointer;
}
button:hover {
  background: #142d66;
}
.msg {
  margin-top: 10px;
  font-weight: bold;
}
</style>
</head>

<body>

<h1>Admin – Crear producto</h1>

<form id="form">
  <input id="name" placeholder="Nombre del producto" required>
  <textarea id="description" placeholder="Descripción" required></textarea>
  <input id="price" type="number" placeholder="Precio" required>
  <input id="discount" type="number" placeholder="Descuento (%)">
  <input id="image" placeholder="URL de la imagen">
  <label>
    <input type="checkbox" id="available" checked>
    Disponible
  </label>
  <br><br>
  <button type="submit">Guardar producto</button>
</form>

<div class="msg" id="msg"></div>

<script>
const API = "https://dombet-backend.onrender.com";

document.getElementById("form").addEventListener("submit", async e => {
  e.preventDefault();

  const product = {
    name: name.value,
    description: description.value,
    price: Number(price.value),
    discount: Number(discount.value || 0),
    available: available.checked,
    images: image.value ? [image.value] : []
  };

  try {
    const res = await fetch(API + "/products", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(product)
    });

    if (!res.ok) throw new Error("Error al guardar");

    msg.innerText = "✅ Producto guardado correctamente";
    form.reset();
  } catch (err) {
    msg.innerText = "❌ Error al guardar el producto";
  }
});
</script>

</body>
</html>
